<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Multivariate polynomials implementations · SumOfSquares</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">SumOfSquares</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Index</a></li><li><a class="tocitem" href="../../../sumofsquares/">Sum-of-Squares Programming</a></li><li><a class="tocitem" href="../../../variables/">Variables</a></li><li><a class="tocitem" href="../../../constraints/">Constraints</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">Getting started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Getting started/circle/">Nonnegative over a variety</a></li><li><a class="tocitem" href="../../Getting started/getting_started/">Getting started</a></li><li><a class="tocitem" href="../../Getting started/motzkin/">Motzkin</a></li><li><a class="tocitem" href="../../Getting started/sos_decomposition/">A trivial SOS decomposition example</a></li><li><a class="tocitem" href="../../Getting started/sum-of-squares_matrices/">Sum-of-Squares matrices</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Polynomial Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Polynomial Optimization/bound_on_global_extremum/">Bound on Global Extremum</a></li><li><a class="tocitem" href="../../Polynomial Optimization/polynomial_optimization/">Polynomial Optimization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Systems and Control</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Systems and Control/lyapunov_function_search/">Lyapunov Function Search</a></li><li><a class="tocitem" href="../../Systems and Control/stabilization_of_nonlinear_systems/">Stabilization of nonlinear systems</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">Other Applications</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Other Applications/bounds_in_probability/">Bounds in Probability</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-5" type="checkbox"/><label class="tocitem" for="menuitem-5-5"><span class="docs-label">Noncommutative and Hermitian</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Noncommutative and Hermitian/noncommutative_variables/">Noncommutative variables</a></li><li><a class="tocitem" href="../../Noncommutative and Hermitian/sums_of_hermitian_squares/">Sums of Hermitian squares</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-6" type="checkbox"/><label class="tocitem" for="menuitem-5-6"><span class="docs-label">Sparsity</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Sparsity/sign_symmetry/">Term sparsity</a></li><li><a class="tocitem" href="../../Sparsity/term_sparsity/">Term sparsity</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-7" type="checkbox"/><label class="tocitem" for="menuitem-5-7"><span class="docs-label">Symmetry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Symmetry/cyclic/">Cyclic symmetry for Sums of Hermitian Squares</a></li><li><a class="tocitem" href="../../Symmetry/dihedral_symmetry_of_the_robinson_form/">Dihedral symmetry of the Robinson form</a></li><li><a class="tocitem" href="../../Symmetry/even_reduction/">Even reduction</a></li><li><a class="tocitem" href="../../Symmetry/permutation_symmetry/">Symmetry reduction</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-8" type="checkbox" checked/><label class="tocitem" for="menuitem-5-8"><span class="docs-label">Extension</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../certificate/">Certificate</a></li><li><a class="tocitem" href="../hypercube/">Hypercube</a></li><li class="is-active"><a class="tocitem" href>Multivariate polynomials implementations</a></li><li><a class="tocitem" href="../univariate_solver/">Univariate Solver</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">Extension</a></li><li class="is-active"><a href>Multivariate polynomials implementations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Multivariate polynomials implementations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jump-dev/SumOfSquares.jl/blob/master/docs/src/tutorials/Extension/typed.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Multivariate-polynomials-implementations"><a class="docs-heading-anchor" href="#Multivariate-polynomials-implementations">Multivariate polynomials implementations</a><a id="Multivariate-polynomials-implementations-1"></a><a class="docs-heading-anchor-permalink" href="#Multivariate-polynomials-implementations" title="Permalink"></a></h1><p><a href="https://mybinder.org/v2/gh/jump-dev/SumOfSquares.jl/gh-pages?filepath=dev/generated/Extension/typed.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt/></a> <a href="https://nbviewer.jupyter.org/github/jump-dev/SumOfSquares.jl/blob/gh-pages/dev/generated/Extension/typed.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a> <strong>Contributed by</strong>: Benoît Legat</p><p>The SumOfSquares package is built on top of the <a href="https://github.com/JuliaAlgebra/MultivariatePolynomials.jl">MultivariatePolynomials</a> abstract interface. <a href="https://github.com/JuliaAlgebra/DynamicPolynomials.jl/">DynamicPolynomials</a> is an implementation of this abstract interface so it can be used with SumOfSquares. Moreover, any other implementation can be used as well. To illustrate, we solve Examples 3.38 of [BPT12] with <a href="https://github.com/JuliaAlgebra/TypedPolynomials.jl">TypedPolynomials</a>, another implementation of <a href="https://github.com/JuliaAlgebra/MultivariatePolynomials.jl">MultivariatePolynomials</a>.</p><p>[BPT12] Blekherman, G. &amp; Parrilo, P. A. &amp; Thomas, R. R. <em>Semidefinite Optimization and Convex Algebraic Geometry</em>. Society for Industrial and Applied Mathematics, <strong>2012</strong>.</p><pre><code class="language-julia hljs">import TypedPolynomials
TypedPolynomials.@polyvar x y
using SumOfSquares
import CSDP
model = SOSModel(CSDP.Optimizer)
con_ref = @constraint(model, 2x^4 + 5y^4 - x^2*y^2 &gt;= -2(x^3*y + x + 1))
optimize!(model)
solution_summary(model)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">* Solver : CSDP

* Status
  Termination status : OPTIMAL
  Primal status      : FEASIBLE_POINT
  Dual status        : FEASIBLE_POINT
  Message from the solver:
  &quot;Problem solved to optimality.&quot;

* Candidate solution
  Objective value      : 0.00000e+00
  Dual objective value : 0.00000e+00

* Work counters
  Solve time (sec)   : 6.59339e-02
</code></pre><p>We see that the problem is feasible. The Sum-of-Squares decomposition can be obtained as follows:</p><pre><code class="language-julia hljs">sos_decomposition(con_ref)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(-0.8025918219908258*x^2 - 0.12696384429349364*x*y + 2.193153675722526*y^2 - 0.4175969723687504*x - 0.09754557420421368*y - 0.6797572045423704)^2 + (-0.9300194624998961*x^2 - 1.2293223495653895*x*y - 0.107702537307966*y^2 + 0.2742242305063454*x - 0.6454996724366074*y + 0.9043636674517767)^2 + (0.44438734692024634*x^2 - 0.1518231994578531*x*y - 0.2040923091350899*y^2 - 0.6219741211964985*x - 1.3853658247098444*y - 0.5739116466586851)^2 + (0.02094358532346286*x^2 - 0.7618740018659129*x*y - 0.2555836507088663*y^2 - 0.34369066581037083*x + 0.5184207196796033*y - 0.570289485543629)^2 + (-0.5053882307722652*x^2 + 0.2972258345292787*x*y - 0.24790977216150892*y^2 - 0.4999834602481285*x + 0.0491342550895953*y + 0.04145310741757451)^2 + (-0.19384054006505613*x^2 + 0.05960947731636697*x*y - 0.10020573751666935*y^2 + 0.2539007344344329*x - 0.06335659197202279*y - 0.2524548756891834)^2</code></pre><p>Why is there several implementations ? Depending in the use-case, one implementation may be more appropriate than another one. <a href="https://github.com/JuliaAlgebra/TypedPolynomials.jl">TypedPolynomials</a> is faster than <a href="https://github.com/JuliaAlgebra/DynamicPolynomials.jl/">DynamicPolynomials</a> but it requires new compilation whenever the list of variables changes. This means that <a href="https://github.com/JuliaAlgebra/TypedPolynomials.jl">TypedPolynomials</a> is not appropriate when the number of variables is dynamic or too large. However, for a small number of variables, it can be faster. When solving Sum-of-Squares programs, the time is mostly taken by the Semidefinite programming solver. The time taken by SumOfSquares/JuMP/MathOptInterface are usually negligible or it time is taken by manipulation of JuMP or MathOptInterface functions therefore using TypedPolynomials over DynamicPolynomials may not make much difference in most cases.</p><p>One case for which using TypedPolynomials might be adequate is when using domain defined by equalities (possibly also with inequalities). Indeed, in that case, SumOfSquares computes the corresponding Gröbner basis which may take a non-negligible amount of time for large systems of equalities.</p><p>To illustrate this, consider the computation of Gröbner basis for the following system from [CLO05, p. 17]. The time taken by TypedPolynomials is below:</p><p>[CLO05] Cox, A. David &amp; Little, John &amp; O&#39;Shea, Donal <em>Using Algebraic Geometry</em>. Graduate Texts in Mathematics, <strong>2005</strong>. https://doi.org/10.1007/b138611</p><pre><code class="language-julia hljs">using BenchmarkTools
@btime let
    TypedPolynomials.@polyvar x y
    S = @set x^3 * y + x == 2x^2 * y^2 &amp;&amp; 3x^4 == y
    SemialgebraicSets.computegröbnerbasis!(S.I)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>The time taken by DynamicPolynomials is as follows:</p><pre><code class="language-julia hljs">import DynamicPolynomials
@btime let
    DynamicPolynomials.@polyvar x y
    S = @set x^3 * y + x == 2x^2 * y^2 &amp;&amp; 3x^4 == y
    SemialgebraicSets.computegröbnerbasis!(S.I)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>We see that TypedPolynomials is faster. The time is still negligible for this small system but for larger systems, choosing TypedPolynomials may be helpful. We can use this system in a Sum-of-Squares constraint as follows:</p><pre><code class="language-julia hljs">TypedPolynomials.@polyvar x y
S = @set x^3 * y + x == 2x^2 * y^2 &amp;&amp; 3x^4 == y
poly = -6x - 4y^3 + 2x*y^2 + 6x^3 - 3y^4 + 13x^2 * y^2
model = Model(CSDP.Optimizer)
con_ref = @constraint(model, poly in SOSCone(), domain = S)
optimize!(model)
solution_summary(model)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">* Solver : CSDP

* Status
  Termination status : OPTIMAL
  Primal status      : FEASIBLE_POINT
  Dual status        : FEASIBLE_POINT
  Message from the solver:
  &quot;Problem solved to optimality.&quot;

* Candidate solution
  Objective value      : 0.00000e+00
  Dual objective value : 0.00000e+00

* Work counters
  Solve time (sec)   : 9.20558e-02
</code></pre><p>We obtain the following decomposition:</p><pre><code class="language-julia hljs">dec = sos_decomposition(con_ref, 1e-6)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(-19.455175815853472*x^2 + 21.754662829241905*x*y - 5.464314355434417*y^2 - 0.00036597435076766847*x + 0.0002666415523617743*y + 7.581243238666406e-5)^2 + (-16.72035526740944*x^2 - 10.610525738832798*x*y + 17.2883614371507*y^2 - 0.00046612893315998007*x - 0.00048049302899887803*y - 1.572847989145024e-5)^2 + (-0.07188392155263187*x^2 - 0.09664733160370975*x*y - 0.12883836375349522*y^2 - 0.004371412269782948*x + 0.0032120020714792906*y + 4.456100422298629e-5)^2 + (0.0007696846260251474*x^2 + 0.0010332353482765122*x*y + 0.001378235821338183*y^2 - 0.04902409715253756*x + 0.036877686904439134*y + 2.8952637949808214e-5)^2</code></pre><p>We can verify that it is correct as follows:</p><pre><code class="language-julia hljs">rem(dec - poly, S.I)</code></pre><p class="math-container">\[ -7.456169418917566e-6x^{2} - 1.9850689602379616e-5xy - 1.3185022282119919e-5y^{2} + 1.692071406579094e-7x + 2.1583931733999258e-7y + 8.81884832569194e-9 \]</p><p>Note that the difference between <code>dec</code> and <code>poly</code> is larger than between the full gram matrix because <code>dec</code> is obtained by dropping the lowest eigenvalues with the threshold <code>1e-6</code>; see <a href="../../../constraints/#SumOfSquares.sos_decomposition"><code>sos_decomposition</code></a>.</p><pre><code class="language-julia hljs">rem(gram_matrix(con_ref) - poly, S.I)</code></pre><p class="math-container">\[ 0.0 \]</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../hypercube/">« Hypercube</a><a class="docs-footer-nextpage" href="../univariate_solver/">Univariate Solver »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 20 September 2022 21:52">Tuesday 20 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
